---
emoji: ✏️
title: 한 입 크기로 잘라 먹는 TypeScript (2)
date: '2024-04-23 23:00:00'
author: logkyung
tags: TypeScript
categories: 블로그
---

## 1. TypeScript 실행하기

### tsc로 컴파일하고 실행
`tsc 파일명`은 특정 파일을 컴파일 하도록 타입스크립트 컴파일러에게 지시하는 명령어. 위 명령어를 입력하면 자바스크립트 파일이 생성되고, 이렇게 컴파일 된 자바스크립트 코드는 node를 이용해 실행.
- tsc src/index.ts : src 폴더 내에 index.js 파일 생성
- node src/index.js: 컴파일 된 js 코드 실행

### tsx(TypeScript Execute)로 실행
하지만 `ts-node`는 Node 20 버전 이상에서는 더 이상 동작하지 않음. 따라서 tsx로 대체. `ts-node 파일명`은 `tsx 파일명`과 같은 동작을 한다.
타입스크립트 코드를 실행하기 위해 tsc를 이용해 타입스크립트 코드를 자바스크립트로 변환, Node.js로 자바스크립트 코드를 실행. `tsx`는 명령어 한 번으로 두 번의 과정을 동시에 수행. 자바스크립트 파일을 생성하지 않고 한번에 타입스크립트 파일을 실행.

## 2. TypeScript 컴파일러 옵션 설정하기
- tsc --init: tsconfig.json 파일을 생성

`"include": ["폴더명"]`
: ts 파일을 컴파일할 때 'tsc [파일 경로]' 명령어를 이용해서 컴파일. 하지만 폴더 내에 파일이 많이 있다면 하나씩 일일이 명령어를 입력하기 어려울 것. include 설정을 이용하면 해당 폴더 내의 모든 ts 파일을 한 번에 컴파일 가능.

```
"compilerOptions": {
  "target": "버전"
},
```
: 타입스크립트 코드를 컴파일해서 만들어지는 자바스크립트 코드의 버전을 설정하는 옵션.
버전에 ES5를 작성하고 저장한 다음, 타입스크립트 파일에 화살표 함수(ES6)를 작성. 자바스크립트로 컴파일한 후 파일을 확인하면 화살표 함수가 함수 표현식으로 변환된 것을 확인할 수 있다.
버전에 ESNext(최신 버전의 자바스크립트)를 작성하고 컴파일하면 자바스크립트 파일도 화살표 함수를 갖게 된다.

*target* 옵션은 *include* 옵션과 다르게 *compilerOptions* 라는 항목 안에 들어있는데, 타입스크립트를 자바스크립트로 변환하는 과정이나 타입 검사 등의 상세한 옵션들을 설정할 때 *compilerOptions* 안에 정의한다.

*"module": "모듈시스템"*
: 변환된 자바스크립트 코드의 모듈 시스템을 설정.
- 자바스크립트 모듈: CommonJS(CSJ), ES 모듈 시스템(ESM)

*"outDir": "디렉토리명"*
: include 옵션을 설정하면 tsc로 컴파일된 자바스크립트 파일이 해당 폴더에 생성되어 ts파일과 함께 존재. 따라서 js 파일을 별도로 보관할 디렉토리를 설정할 수 있다.

*"strict": true*
: 컴파일러가 타입스크립트 파일의 타입을 검사할 때 얼마나 엄격하게 검사할지를 설정하는 옵션. !중요한 옵션!
- strict 옵션은 엄격한 타입 검사를 의미하는 옵션. 타입스크립트에서는 매개변수의 타입은 프로그래머가 직접 지정하도록 권장.


타입스크립트는 모든 ts 파일을 "전역 모듈"로 취급. 따라서 두 개의 다른 ts 파일에 같은 이름의 변수를 선언하면 오류 발생.
### 해결 방법 1)
모듈 시스템을 사용하는 문법 키워드(export, import)를 파일 내에 한 번 이상 작성을 하면 해당 파일은 독립된 모듈로 취급.
### 해결 방법 2)
tsconfig.json에 아래와 같은 옵션을 추가
`"moduleDetection": "force"`
: 두 개의 파일에 같은 변수명을 작성하고 해당 옵션을 추가한 다음 컴파일을 해보면 js 파일에 `export {};` 코드가 자동으로 추가되어 있음을 확인할 수 있다.

### skipLibCheck 옵션 추가
*@types* 버전이 20버전 이상으로 업데이트되면서 특정 라이브러리에서 타입 검사 오류가 발생. 따라서 tsconfig.json에 compilerOptions 내부에 `skipLibCheck` 옵션을 추가해야 한다. 타입 정의 파일(.d.ts 확장자를 갖는 파일)의 타입 검사를 생략하는 옵션. 보통 타입 정의 파일은 라이브러리에서 사용하는데 가끔 라이브러리의 타입 정의 파일에서 타입 오류가 발생. 따라서 해당 옵션을 true로 설정하여 타입 정의 파일의 타입 검사를 생략하도록 한다.
